(()=>{"use strict";var e={n:s=>{var r=s&&s.__esModule?()=>s.default:()=>s;return e.d(r,{a:r}),r},d:(s,r)=>{for(var l in r)e.o(r,l)&&!e.o(s,l)&&Object.defineProperty(s,l,{enumerable:!0,get:r[l]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.React,r=window.wp.element,l=window.wp.i18n,a=window.wp.apiFetch;var t=e.n(a);const n=window.wp.components,o=[{value:"",label:(0,l.__)("Select...","frs-users")},{value:"broker_associate",label:(0,l.__)("Broker Associate","frs-users")},{value:"sales_associate",label:(0,l.__)("Sales Associate","frs-users")},{value:"dual_license",label:(0,l.__)("Dual License","frs-users")},{value:"loan_originator",label:(0,l.__)("Loan Originator","frs-users")},{value:"leadership",label:(0,l.__)("Leadership","frs-users")},{value:"staff",label:(0,l.__)("Staff","frs-users")}],i=function(){const[e,a]=(0,r.useState)({first_name:"",last_name:"",email:"",phone_number:"",job_title:"",nmls:"",select_person_type:""}),[i,u]=(0,r.useState)(!1),[_,c]=(0,r.useState)(null),m=(e,s)=>{a(r=>({...r,[e]:s}))};return(0,s.createElement)("div",{className:"wrap frs-profile-add"},(0,s.createElement)("h1",null,(0,l.__)("Add New Profile","frs-users")),_&&(0,s.createElement)(n.Notice,{status:_.status,onRemove:()=>c(null),isDismissible:!0},_.message),(0,s.createElement)(n.Panel,null,(0,s.createElement)(n.PanelBody,{title:(0,l.__)("Basic Information","frs-users"),initialOpen:!0},(0,s.createElement)(n.Flex,{gap:4,wrap:!0},(0,s.createElement)(n.FlexBlock,null,(0,s.createElement)(n.TextControl,{label:(0,l.__)("First Name","frs-users"),value:e.first_name,onChange:e=>m("first_name",e),required:!0})),(0,s.createElement)(n.FlexBlock,null,(0,s.createElement)(n.TextControl,{label:(0,l.__)("Last Name","frs-users"),value:e.last_name,onChange:e=>m("last_name",e),required:!0}))),(0,s.createElement)(n.TextControl,{label:(0,l.__)("Email","frs-users"),type:"email",value:e.email,onChange:e=>m("email",e),required:!0}),(0,s.createElement)(n.TextControl,{label:(0,l.__)("Phone","frs-users"),value:e.phone_number,onChange:e=>{m("phone_number",(e=>{if(!e)return"";const s=e.replace(/\D/g,"");return s.length<=3?s:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6,10)}`})(e))},placeholder:"(555) 123-4567"})),(0,s.createElement)(n.PanelBody,{title:(0,l.__)("Professional Information","frs-users"),initialOpen:!0},(0,s.createElement)(n.SelectControl,{label:(0,l.__)("Profile Type","frs-users"),value:e.select_person_type,options:o,onChange:e=>m("select_person_type",e)}),(0,s.createElement)(n.TextControl,{label:(0,l.__)("Job Title","frs-users"),value:e.job_title,onChange:e=>m("job_title",e)}),(0,s.createElement)(n.TextControl,{label:(0,l.__)("NMLS #","frs-users"),value:e.nmls,onChange:e=>m("nmls",e)}))),(0,s.createElement)("div",{style:{marginTop:"20px"}},(0,s.createElement)(n.Button,{variant:"primary",onClick:async()=>{if(e.first_name&&e.last_name&&e.email)if(e.email.includes("@")){u(!0),c(null);try{const s=await t()({path:"/frs-users/v1/profiles",method:"POST",data:{...e,is_active:!0}});c({status:"success",message:(0,l.__)("Profile created successfully!","frs-users")}),setTimeout(()=>{const e=s.data?.user_id||s.data?.id;window.location.href=e?`${window.frsProfileAdd.profileEditUrl}${e}`:window.frsProfileAdd.listUrl},1e3)}catch(e){c({status:"error",message:e.message||(0,l.__)("Failed to create profile.","frs-users")})}finally{u(!1)}}else c({status:"error",message:(0,l.__)("Please enter a valid email address.","frs-users")});else c({status:"error",message:(0,l.__)("First name, last name, and email are required.","frs-users")})},disabled:i,isBusy:i},i?(0,l.__)("Creating...","frs-users"):(0,l.__)("Create Profile","frs-users")),(0,s.createElement)(n.Button,{variant:"secondary",href:window.frsProfileAdd?.listUrl||"#",style:{marginLeft:"10px"}},(0,l.__)("Cancel","frs-users"))))},u=document.getElementById("frs-profile-add-root");u&&(0,r.createRoot)(u).render((0,s.createElement)(i,null))})();