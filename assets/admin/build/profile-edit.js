(()=>{"use strict";var e={20(e,t,l){var r=l(609),a=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,l){var r,i={},c=null,_=null;for(r in void 0!==l&&(c=""+l),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(_=t.ref),t)n.call(t,r)&&!o.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:_,props:i,_owner:s.current}}},609(e){e.exports=window.React},848(e,t,l){e.exports=l(20)}},t={};function l(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=l(609);const a=window.wp.element,n=window.wp.i18n,s=window.wp.apiFetch;var o=l.n(s);const i=window.wp.components,c=window.wp.primitives;var _=l(848),u=(0,_.jsx)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(c.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})});const{profile:m,roles:f,rolesWithPrefixes:p,listUrl:E,states:d,userId:h,hubSiteUrl:g,lendingSiteUrl:v,realestateSiteUrl:b,localSiteUrl:w}=window.frsProfileEdit,x=function(){const[e,t]=(0,a.useState)(m),[l,s]=(0,a.useState)(!1),[c,_]=(0,a.useState)(null),x=(0,a.useCallback)((e,l)=>{t(t=>({...t,[e]:l}))},[]),y=(0,a.useCallback)(()=>{const e=wp.media({title:(0,n.__)("Select Profile Photo","frs-users"),button:{text:(0,n.__)("Use this photo","frs-users")},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();x("headshot_id",t.id),x("headshot_url",t.sizes?.thumbnail?.url||t.url)}),e.open()},[x]),P=[{name:"contact",title:(0,n.__)("Contact","frs-users"),content:(0,r.createElement)(i.Panel,null,(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Basic Information","frs-users"),initialOpen:!0},(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.Flex,{direction:"row",gap:4,wrap:!0},(0,r.createElement)(i.FlexBlock,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("First Name","frs-users"),value:e.first_name||"",onChange:e=>x("first_name",e)})),(0,r.createElement)(i.FlexBlock,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Last Name","frs-users"),value:e.last_name||"",onChange:e=>x("last_name",e)})))),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Email","frs-users"),type:"email",value:e.email||"",onChange:e=>x("email",e),__nextHasNoMarginBottom:!0}))),(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Phone Numbers","frs-users"),initialOpen:!0},(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.Flex,{direction:"row",gap:4,wrap:!0},(0,r.createElement)(i.FlexBlock,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Phone","frs-users"),value:e.phone_number||"",onChange:e=>x("phone_number",e)})),(0,r.createElement)(i.FlexBlock,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Mobile","frs-users"),value:e.mobile_number||"",onChange:e=>x("mobile_number",e)})))),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Office","frs-users"),value:e.office||"",onChange:e=>x("office",e),__nextHasNoMarginBottom:!0}))))},{name:"professional",title:(0,n.__)("Professional","frs-users"),content:(0,r.createElement)(i.Panel,null,(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Professional Details","frs-users"),initialOpen:!0},(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Job Title","frs-users"),value:e.job_title||"",onChange:e=>x("job_title",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.Flex,{direction:"row",gap:4,wrap:!0},(0,r.createElement)(i.FlexBlock,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("NMLS #","frs-users"),value:e.nmls||"",onChange:e=>x("nmls",e)})),(0,r.createElement)(i.FlexBlock,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("DRE License #","frs-users"),value:e.dre_license||"",onChange:e=>x("dre_license",e)})))),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextareaControl,{label:(0,n.__)("Biography","frs-users"),value:e.biography||"",onChange:e=>x("biography",e),rows:6,__nextHasNoMarginBottom:!0}))),(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Profile Photo","frs-users"),initialOpen:!0},(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.BaseControl,{label:(0,n.__)("Headshot","frs-users"),__nextHasNoMarginBottom:!0},(0,r.createElement)("div",{className:"frs-profile-photo"},e.headshot_url&&(0,r.createElement)("img",{src:e.headshot_url,alt:(0,n.__)("Profile photo","frs-users"),className:"frs-profile-photo__preview"}),(0,r.createElement)(i.Flex,{direction:"row",gap:2},(0,r.createElement)(i.Button,{variant:"secondary",onClick:y},e.headshot_id?(0,n.__)("Change Photo","frs-users"):(0,n.__)("Select Photo","frs-users")),e.headshot_id&&(0,r.createElement)(i.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>{x("headshot_id",""),x("headshot_url","")}},(0,n.__)("Remove","frs-users"))))))))},{name:"location",title:(0,n.__)("Location","frs-users"),content:(0,r.createElement)(i.Panel,null,(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Location Details","frs-users"),initialOpen:!0},(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("City, State","frs-users"),value:e.city_state||"",onChange:e=>x("city_state",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Region","frs-users"),value:e.region||"",onChange:e=>x("region",e),__nextHasNoMarginBottom:!0}))),(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Service Areas","frs-users"),initialOpen:!0},(0,r.createElement)("div",{className:"frs-service-areas-grid"},Object.entries(d).map(([t,l])=>(0,r.createElement)(i.CheckboxControl,{key:t,label:l,checked:(e.service_areas||[]).includes(t),onChange:l=>((t,l)=>{const r=e.service_areas||[];x("service_areas",l?[...r,t]:r.filter(e=>e!==t))})(t,l),__nextHasNoMarginBottom:!0})))))},{name:"social",title:(0,n.__)("Social","frs-users"),content:(0,r.createElement)(i.Panel,null,(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Social Media Links","frs-users"),initialOpen:!0},(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("LinkedIn URL","frs-users"),type:"url",value:e.linkedin_url||"",onChange:e=>x("linkedin_url",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Facebook URL","frs-users"),type:"url",value:e.facebook_url||"",onChange:e=>x("facebook_url",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Instagram URL","frs-users"),type:"url",value:e.instagram_url||"",onChange:e=>x("instagram_url",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Twitter/X URL","frs-users"),type:"url",value:e.twitter_url||"",onChange:e=>x("twitter_url",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("YouTube URL","frs-users"),type:"url",value:e.youtube_url||"",onChange:e=>x("youtube_url",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("TikTok URL","frs-users"),type:"url",value:e.tiktok_url||"",onChange:e=>x("tiktok_url",e),__nextHasNoMarginBottom:!0}))))},{name:"settings",title:(0,n.__)("Settings","frs-users"),content:(0,r.createElement)(i.Panel,null,(0,r.createElement)(i.PanelBody,{title:(0,n.__)("Profile Settings","frs-users"),initialOpen:!0},(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.ToggleControl,{label:(0,n.__)("Active","frs-users"),help:(0,n.__)("Show this profile in public directories.","frs-users"),checked:e.is_active,onChange:e=>x("is_active",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.SelectControl,{label:(0,n.__)("Profile Type","frs-users"),value:e.select_person_type||"",options:[{value:"",label:(0,n.__)("Select...","frs-users")},...Object.entries(f).map(([e,t])=>({value:e,label:t}))],onChange:e=>x("select_person_type",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Profile Slug","frs-users"),help:(0,n.__)("URL-friendly identifier for this profile.","frs-users"),value:e.profile_slug||"",onChange:e=>x("profile_slug",e),__nextHasNoMarginBottom:!0})),(0,r.createElement)(i.PanelRow,null,(0,r.createElement)(i.TextControl,{label:(0,n.__)("Apply Now URL","frs-users"),type:"url",value:e.arrive||"",onChange:e=>x("arrive",e),__nextHasNoMarginBottom:!0}))))}];return(0,r.createElement)("div",{className:"frs-profile-edit"},(0,r.createElement)("div",{className:"frs-profile-edit__header"},(0,r.createElement)(i.Flex,{align:"center",justify:"space-between"},(0,r.createElement)(i.FlexItem,null,(0,r.createElement)(i.Flex,{align:"center",gap:4},(0,r.createElement)("button",{type:"button",onClick:y,className:"frs-profile-edit__avatar-button",title:(0,n.__)("Click to change photo","frs-users")},(0,r.createElement)("img",{src:e.headshot_url||e.avatar_url,alt:"",className:"frs-profile-edit__avatar"}),(0,r.createElement)("span",{className:"frs-profile-edit__avatar-overlay"},(0,n.__)("Edit","frs-users"))),(0,r.createElement)("div",null,(0,r.createElement)("h1",{className:"frs-profile-edit__title"},e.first_name," ",e.last_name),(0,r.createElement)("p",{className:"frs-profile-edit__subtitle"},e.email)))),(0,r.createElement)(i.FlexItem,null,(0,r.createElement)(i.Flex,{gap:2},(0,r.createElement)(i.Button,{variant:"tertiary",href:E},(0,n.__)("Back to List","frs-users")),(()=>{const t=e.select_person_type||"",l=["broker_associate","sales_associate"].includes(t),a=l?b:v,s=p?.[t],o=s?.url_prefix||"lo",c=e.profile_slug||e.user_nicename;if(!c)return null;const _=[];if(g){const e=`${g}${o}/${c}/`;_.push((0,r.createElement)(i.Button,{key:"hub",variant:"secondary",icon:u,href:e,target:"_blank",title:(0,n.__)("View on internal hub site","frs-users")},(0,n.__)("Hub","frs-users")))}if(a&&a!==g){const e=`${a}${o}/${c}/`;_.push((0,r.createElement)(i.Button,{key:"marketing",variant:"secondary",icon:u,href:e,target:"_blank",title:l?"c21masters.com":"21stcenturylending.com"},(0,n.__)("Public","frs-users")))}if(0===_.length&&w){const e=`${w}${o}/${c}/`;_.push((0,r.createElement)(i.Button,{key:"local",variant:"secondary",icon:u,href:e,target:"_blank"},(0,n.__)("View","frs-users")))}return _})(),(0,r.createElement)(i.Button,{variant:"primary",onClick:async()=>{s(!0),_(null);try{await o()({path:`/frs-users/v1/profiles/${h}`,method:"PUT",data:e}),_({status:"success",message:(0,n.__)("Profile saved successfully.","frs-users")})}catch(e){_({status:"error",message:e.message||(0,n.__)("Failed to save profile.","frs-users")})}finally{s(!1)}},disabled:l},l?(0,r.createElement)(i.Spinner,null):(0,n.__)("Save Profile","frs-users")))))),c&&(0,r.createElement)(i.Notice,{status:c.status,onRemove:()=>_(null),className:"frs-profile-edit__notice"},c.message),(0,r.createElement)("div",{className:"frs-profile-edit__content"},(0,r.createElement)(i.TabPanel,{className:"frs-profile-edit__tabs",tabs:P.map(({name:e,title:t})=>({name:e,title:t}))},e=>{const t=P.find(t=>t.name===e.name);return(0,r.createElement)("div",{className:"frs-profile-edit__tab-content"},t?.content)})))},y=document.getElementById("frs-profile-edit-root");y&&(0,a.createRoot)(y).render((0,r.createElement)(x,null))})();