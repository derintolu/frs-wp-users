import*as e from"https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0-rc.1/lib/qr-code-styling.js";import{getContext as t,getElement as o,store as r}from"@wordpress/interactivity";var n={659:(t,o,r)=>{var n,s;t.exports=(n={default:()=>e.default},s={},r.d(s,n),s)}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={exports:{}};return n[e](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);let a=null;const{state:l,actions:c}=r("frs/lo-detail",{state:{get fullName(){const e=l.lo||{};return`${e.first_name||""} ${e.last_name||""}`.trim()}},actions:{toggleQRCode(){const e=t();e.showQR=!e.showQR,e.showQR&&c.generateQRCode()},async generateQRCode(){const{ref:e}=o(),t=e.querySelector(".frs-lo-detail__qr-code");if(!t||t.hasChildNodes())return;if(!a)try{const e=await Promise.resolve().then(i.bind(i,659));a=e.default}catch(e){return void console.error("Failed to load QR code library:",e)}const r=l.lo,n=`${l.hubUrl}profile/${r.profile_slug||r.id}`;new a({width:140,height:140,type:"canvas",data:n,margin:0,qrOptions:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"L"},dotsOptions:{type:"extra-rounded",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#2563eb"},{offset:1,color:"#2dd4da"}]}},cornersSquareOptions:{type:"extra-rounded",gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#2563eb"},{offset:1,color:"#2dd4da"}]}},cornersDotOptions:{gradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#2dd4da"},{offset:1,color:"#2563eb"}]}},backgroundOptions:{color:"#ffffff"}}).append(t)},downloadVCard(){const e=l.lo,t=function(e){const t=["BEGIN:VCARD","VERSION:3.0",`FN:${d(e.first_name+" "+e.last_name)}`,`N:${d(e.last_name)};${d(e.first_name)};;;`,"ORG:21st Century Lending","TITLE:Loan Officer"];if(e.email&&t.push(`EMAIL;TYPE=WORK:${d(e.email)}`),e.phone_number&&t.push(`TEL;TYPE=WORK:${d(p(e.phone_number))}`),e.mobile_number&&t.push(`TEL;TYPE=CELL:${d(p(e.mobile_number))}`),e.office_phone&&t.push(`TEL;TYPE=WORK,VOICE:${d(p(e.office_phone))}`),e.city_state){const[o,r]=(e.city_state||"").split(",").map(e=>e.trim());t.push(`ADR;TYPE=WORK:;;${d(e.address||"")};${d(o||"")};${d(r||"")};${d(e.zip_code||e.zip||"")};USA`)}const o=e.nmls_number||e.nmls;return o&&t.push(`NOTE:NMLS# ${d(o)}`),e.website_url?t.push(`URL:${e.website_url}`):e.profile_slug&&t.push(`URL:${l.hubUrl}profile/${e.profile_slug}`),e.headshot_url&&t.push(`PHOTO;VALUE=URI:${e.headshot_url}`),e.linkedin_url&&t.push(`X-SOCIALPROFILE;TYPE=linkedin:${e.linkedin_url}`),t.push(`REV:${(new Date).toISOString().replace(/[-:]/g,"").split(".")[0]}Z`),t.push("END:VCARD"),t.join("\r\n")+"\r\n"}(e);!function(e,t){const o=new Blob([e],{type:"text/vcard"}),r=URL.createObjectURL(o),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}(t,`${e.first_name}-${e.last_name}.vcf`)},toggleMeetingForm(){l.showMeetingForm=!l.showMeetingForm}}});function d(e){return e?e.toString().replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/;/g,"\\;").replace(/,/g,"\\,"):""}function p(e){if(!e)return"";const t=e.replace(/[^\d+]/g,"");return 10===t.length?"+1"+t:t}