(()=>{"use strict";var e={n:s=>{var l=s&&s.__esModule?()=>s.default:()=>s;return e.d(l,{a:l}),l},d:(s,l)=>{for(var r in l)e.o(l,r)&&!e.o(s,r)&&Object.defineProperty(s,r,{enumerable:!0,get:l[r]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.wp.blocks,l=window.wp.i18n,r=window.wp.blockEditor,t=window.wp.components,a=window.wp.element,n=window.wp.apiFetch;var i=e.n(n);const o=window.ReactJSXRuntime,d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"frs-users/loan-officer-directory","version":"1.0.0","title":"Loan Officer Directory","category":"frs-blocks","icon":"groups","description":"Display a filterable directory of loan officers","keywords":["loan officer","directory","team","filter","search"],"textdomain":"frs-users","editorScript":"file:./index.js","viewScript":"file:./view.js","style":"file:./style-index.css","editorStyle":"file:./index.css","render":"file:./render.php","attributes":{"personType":{"type":"string","default":""},"region":{"type":"string","default":""},"cardSize":{"type":"string","enum":["small","medium","large"],"default":"medium"},"detailLevel":{"type":"string","enum":["minimal","standard","full"],"default":"standard"},"audience":{"type":"string","enum":["internal","external"],"default":"external"},"showFilters":{"type":"boolean","default":true},"showContactButtons":{"type":"boolean","default":true},"perPage":{"type":"number","default":12}},"supports":{"html":false,"align":["wide","full"]},"example":{}}');(0,s.registerBlockType)(d.name,{...d,edit:function({attributes:e,setAttributes:s}){const{personType:n,region:d,cardSize:c,detailLevel:u,audience:f,showFilters:m,showContactButtons:x,perPage:p}=e,[g,h]=(0,a.useState)([]),[_,b]=(0,a.useState)(!0),[j,v]=(0,a.useState)(null),y=(0,r.useBlockProps)();(0,a.useEffect)(()=>{b(!0),v(null);const e=new URLSearchParams({per_page:p.toString()});n&&e.append("type",n),i()({path:`/frs-users/v1/profiles?${e.toString()}`}).then(e=>{let s=e.data||[];d&&(s=s.filter(e=>e.region===d)),h(s),b(!1)}).catch(e=>{v(e.message),b(!1)})},[n,d,p]);const w={small:"max-w-xs",medium:"max-w-md",large:"max-w-2xl"}[c],S={small:"h-12 w-12 text-sm",medium:"h-16 w-16 text-base",large:"h-20 w-20 text-lg"}[c],N={small:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",medium:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",large:"grid-cols-1 lg:grid-cols-2"}[c];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.InspectorControls,{children:[(0,o.jsxs)(t.PanelBody,{title:(0,l.__)("Filter Settings","frs-users"),children:[(0,o.jsx)(t.SelectControl,{label:(0,l.__)("Person Type","frs-users"),value:n,options:[{label:(0,l.__)("All Types","frs-users"),value:""},{label:(0,l.__)("Loan Officer","frs-users"),value:"loan_officer"},{label:(0,l.__)("Realtor","frs-users"),value:"realtor"}],onChange:e=>s({personType:e})}),(0,o.jsx)(t.SelectControl,{label:(0,l.__)("Region","frs-users"),value:d,options:[{label:(0,l.__)("All Regions","frs-users"),value:""},{label:(0,l.__)("Pacific","frs-users"),value:"pacific"},{label:(0,l.__)("Mountain","frs-users"),value:"mountain"},{label:(0,l.__)("Southwest","frs-users"),value:"southwest"}],onChange:e=>s({region:e})}),(0,o.jsx)(t.RangeControl,{label:(0,l.__)("Profiles Per Page","frs-users"),value:p,onChange:e=>s({perPage:e||12}),min:6,max:50,step:6}),(0,o.jsx)(t.ToggleControl,{label:(0,l.__)("Show Filters on Frontend","frs-users"),checked:m,onChange:e=>s({showFilters:e})})]}),(0,o.jsxs)(t.PanelBody,{title:(0,l.__)("Display Settings","frs-users"),children:[(0,o.jsx)(t.SelectControl,{label:(0,l.__)("Card Size","frs-users"),value:c,options:[{label:(0,l.__)("Small","frs-users"),value:"small"},{label:(0,l.__)("Medium","frs-users"),value:"medium"},{label:(0,l.__)("Large","frs-users"),value:"large"}],onChange:e=>s({cardSize:e})}),(0,o.jsx)(t.SelectControl,{label:(0,l.__)("Detail Level","frs-users"),value:u,options:[{label:(0,l.__)("Minimal","frs-users"),value:"minimal"},{label:(0,l.__)("Standard","frs-users"),value:"standard"},{label:(0,l.__)("Full","frs-users"),value:"full"}],onChange:e=>s({detailLevel:e})}),(0,o.jsx)(t.SelectControl,{label:(0,l.__)("Audience","frs-users"),value:f,options:[{label:(0,l.__)("External (Public)","frs-users"),value:"external"},{label:(0,l.__)("Internal (Staff)","frs-users"),value:"internal"}],onChange:e=>s({audience:e})}),(0,o.jsx)(t.ToggleControl,{label:(0,l.__)("Show Contact Buttons","frs-users"),checked:x,onChange:e=>s({showContactButtons:e})})]})]}),(0,o.jsx)("div",{...y,children:(0,o.jsxs)("div",{className:"loan-officer-directory",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold",children:(0,l.__)("Loan Officer Directory","frs-users")}),_&&(0,o.jsx)("p",{className:"text-gray-600",children:(0,l.__)("Loading...","frs-users")}),!_&&(0,o.jsxs)("p",{className:"text-gray-600",children:[g.length," ",1===g.length?(0,l.__)("officer","frs-users"):(0,l.__)("officers","frs-users")," ",(0,l.__)("found","frs-users")]})]}),_&&(0,o.jsxs)("div",{className:"flex items-center justify-center p-12",children:[(0,o.jsx)(t.Spinner,{}),(0,o.jsx)("span",{className:"ml-2",children:(0,l.__)("Loading profiles...","frs-users")})]}),j&&(0,o.jsxs)("div",{className:"p-6 border-2 border-red-300 bg-red-50 rounded-lg text-center",children:[(0,o.jsx)("p",{className:"text-red-700 font-semibold",children:(0,l.__)("Error loading profiles","frs-users")}),(0,o.jsx)("p",{className:"text-sm text-red-600 mt-2",children:j})]}),!_&&!j&&0===g.length&&(0,o.jsxs)("div",{className:"p-12 border-2 border-dashed border-gray-300 rounded-lg text-center",children:[(0,o.jsx)("p",{className:"text-gray-600 font-semibold",children:(0,l.__)("No loan officers found","frs-users")}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(0,l.__)("Try adjusting the filters in the sidebar","frs-users")})]}),!_&&!j&&g.length>0&&(0,o.jsx)("div",{className:`grid gap-6 ${N}`,children:g.map(e=>{return(0,o.jsxs)("div",{className:`${w} border rounded-xl shadow-md p-4 bg-white`,children:[(0,o.jsxs)("div",{className:`flex ${"large"===c?"flex-row":"flex-col"} gap-3 items-center`,children:[(0,o.jsx)("div",{className:`${S} rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold flex-shrink-0`,style:{backgroundImage:e.headshot_url?`url(${e.headshot_url})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:!e.headshot_url&&(s=e.first_name,l=e.last_name,`${s?.charAt(0)||""}${l?.charAt(0)||""}`.toUpperCase())}),(0,o.jsxs)("div",{className:"flex-1 "+("large"===c?"text-left":"text-center"),children:[(0,o.jsx)("h3",{className:"font-bold "+("small"===c?"text-sm":"medium"===c?"text-base":"text-lg"),children:e.full_name}),e.job_title&&(0,o.jsx)("p",{className:"text-gray-600 text-xs mt-1",children:e.job_title}),e.nmls_number&&"minimal"!==u&&(0,o.jsxs)("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded",children:["NMLS# ",e.nmls_number]})]})]}),"minimal"!==u&&(0,o.jsxs)("div",{className:"mt-3 space-y-1 text-xs text-gray-600",children:[e.city_state&&(0,o.jsxs)("p",{children:["ðŸ“ ",e.city_state]}),e.email&&(0,o.jsxs)("p",{children:["âœ‰ï¸ ",e.email]})]}),"minimal"!==u&&e.specialties_lo&&e.specialties_lo.length>0&&(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)("div",{className:"flex flex-wrap gap-1",children:e.specialties_lo.slice(0,2).map((e,s)=>(0,o.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 rounded",children:e},s))})})]},e.id);var s,l})})]})})]})},save:()=>null})})();